var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function a(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function l(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function d(){return f(" ")}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}let h;function g(e){h=e}const v=[],k=[],x=[],m=[],y=Promise.resolve();let b=!1;function T(e){x.push(e)}const E=new Set;let _=0;function O(){const e=h;do{for(;_<v.length;){const e=v[_];_++,g(e),w(e.$$)}for(g(null),v.length=0,_=0;k.length;)k.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];E.has(t)||(E.add(t),t())}x.length=0}while(v.length);for(;m.length;)m.pop()();b=!1,E.clear(),g(e)}function w(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const N=new Set;function P(e,t){e&&e.i&&(N.delete(e),e.i(t))}function $(e,n,s,i){const{fragment:u,on_mount:c,on_destroy:a,after_update:l}=e.$$;u&&u.m(n,s),i||T((()=>{const n=c.map(t).filter(o);a?a.push(...n):r(n),e.$$.on_mount=[]})),l.forEach(T)}function C(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function A(e,t){-1===e.$$.dirty[0]&&(v.push(e),b||(b=!0,y.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(t,o,s,i,u,a,l,f=[-1]){const d=h;g(t);const p=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};l&&l(p.root);let v=!1;if(p.ctx=s?s(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&u(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),v&&A(t,e)),n})):[],p.update(),v=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&P(t.$$.fragment),$(t,o.target,o.anchor,o.customElement),O()}g(d)}class S{$destroy(){C(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const L=window;function R(e,t,n={}){const r=Object.assign({tab:"\t",indentOn:/{$/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:L},n),o=r.window,s=o.document;let i,u,c=[],a=[],l=-1,f=!1;e.setAttribute("contenteditable","plaintext-only"),e.setAttribute("spellcheck",r.spellcheck?"true":"false"),e.style.outline="none",e.style.overflowWrap="break-word",e.style.overflowY="auto",e.style.whiteSpace="pre-wrap";let d=!1;t(e),"plaintext-only"!==e.contentEditable&&(d=!0),d&&e.setAttribute("contenteditable","true");const p=$((()=>{const n=x();t(e,n),m(n)}),30);let h=!1;const g=e=>!w(e)&&!N(e)&&"Meta"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&!e.key.startsWith("Arrow"),v=$((e=>{g(e)&&(E(),h=!1)}),300),k=(t,n)=>{c.push([t,n]),e.addEventListener(t,n)};function x(){const t=S(),n={start:0,end:0,dir:void 0};let{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:u}=t;if(!r||!i)throw"error1";if(r.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");r.insertBefore(e,r.childNodes[o]),r=e,o=0}if(i.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");i.insertBefore(e,i.childNodes[u]),i=e,u=0}return _(e,(e=>{if(e===r&&e===i)return n.start+=o,n.end+=u,n.dir=o<=u?"->":"<-","stop";if(e===r){if(n.start+=o,n.dir)return"stop";n.dir="->"}else if(e===i){if(n.end+=u,n.dir)return"stop";n.dir="<-"}e.nodeType===Node.TEXT_NODE&&("->"!=n.dir&&(n.start+=e.nodeValue.length),"<-"!=n.dir&&(n.end+=e.nodeValue.length))})),e.normalize(),n}function m(t){const n=S();let r,o,s=0,i=0;if(t.dir||(t.dir="->"),t.start<0&&(t.start=0),t.end<0&&(t.end=0),"<-"==t.dir){const{start:e,end:n}=t;t.start=n,t.end=e}let u=0;_(e,(e=>{if(e.nodeType!==Node.TEXT_NODE)return;const n=(e.nodeValue||"").length;if(u+n>t.start&&(r||(r=e,s=t.start-u),u+n>t.end))return o=e,i=t.end-u,"stop";u+=n})),r||(r=e,s=e.childNodes.length),o||(o=e,i=e.childNodes.length),"<-"==t.dir&&([r,s,o,i]=[o,i,r,s]),n.setBaseAndExtent(r,s,o,i)}function y(){const t=S().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function b(){const t=S().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function T(e){if(d&&"Enter"===e.key)if(M(e),e.stopPropagation(),""==b()){P("\n ");const e=x();e.start=--e.end,m(e)}else P("\n")}function E(){if(!f)return;const t=e.innerHTML,n=x(),r=a[l];if(r&&r.html===t&&r.pos.start===n.start&&r.pos.end===n.end)return;l++,a[l]={html:t,pos:n},a.splice(l+1);l>300&&(l=300,a.splice(0,1))}function _(e,t){const n=[];e.firstChild&&n.push(e.firstChild);let r=n.pop();for(;r&&"stop"!==t(r);)r.nextSibling&&n.push(r.nextSibling),r.firstChild&&n.push(r.firstChild),r=n.pop()}function O(e){return e.metaKey||e.ctrlKey}function w(e){return O(e)&&!e.shiftKey&&"KeyZ"===e.code}function N(e){return O(e)&&e.shiftKey&&"KeyZ"===e.code}function P(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),s.execCommand("insertHTML",!1,e)}function $(e,t){let n=0;return(...r)=>{clearTimeout(n),n=o.setTimeout((()=>e(...r)),t)}}function C(e){let t=e.length-1;for(;t>=0&&"\n"!==e[t];)t--;t++;let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n)||"",t,n]}function A(){return e.textContent||""}function M(e){e.preventDefault()}function S(){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.getSelection():o.getSelection()}return k("keydown",(t=>{t.defaultPrevented||(u=A(),r.preserveIdent?function(e){if("Enter"===e.key){const t=y(),n=b();let[o]=C(t),s=o;if(r.indentOn.test(t)&&(s+=r.tab),s.length>0?(M(e),e.stopPropagation(),P("\n"+s)):T(e),s!==o&&"}"===n[0]){const e=x();P("\n"+o),m(e)}}}(t):T(t),r.catchTab&&function(e){if("Tab"===e.key)if(M(e),e.shiftKey){const e=y();let[t,n]=C(e);if(t.length>0){const e=x(),o=Math.min(r.tab.length,t.length);m({start:n,end:n+o}),s.execCommand("delete"),e.start-=o,e.end-=o,m(e)}}else P(r.tab)}(t),r.addClosing&&function(e){const t="([{'\"",n=")]}'\"",r=b(),o=y(),s="\\"===o.substr(o.length-1),i=r.substr(0,1);if(n.includes(e.key)&&!s&&i===e.key){const t=x();M(e),t.start=++t.end,m(t)}else if(t.includes(e.key)&&!s&&("\"'".includes(e.key)||[""," ","\n"].includes(i))){M(e);const r=x(),o=r.start==r.end?"":S().toString();P(e.key+o+n[t.indexOf(e.key)]),r.start++,r.end++,m(r)}}(t),r.history&&(!function(t){if(w(t)){M(t),l--;const n=a[l];n&&(e.innerHTML=n.html,m(n.pos)),l<0&&(l=0)}if(N(t)){M(t),l++;const n=a[l];n&&(e.innerHTML=n.html,m(n.pos)),l>=a.length&&l--}}(t),g(t)&&!h&&(E(),h=!0)),d&&m(x()))})),k("keyup",(e=>{e.defaultPrevented||e.isComposing||(u!==A()&&p(),v(e),i&&i(A()))})),k("focus",(e=>{f=!0})),k("blur",(e=>{f=!1})),k("paste",(n=>{E(),function(n){M(n);const r=(n.originalEvent||n).clipboardData.getData("text/plain").replace(/\r/g,""),o=x();P(r),t(e),m({start:o.start+r.length,end:o.start+r.length})}(n),E(),i&&i(A())})),{updateOptions(e){Object.assign(r,e)},updateCode(n){e.textContent=n,t(e)},onUpdate(e){i=e},toString:A,save:x,restore:m,recordHistory:E,destroy(){for(let[t,n]of c)e.removeEventListener(t,n)}}}function j(e,t,n){const r=e.slice();return r[1]=t[n],r}function q(e,t,n){const r=e.slice();return r[4]=t[n],r}function B(e){let t,n;return{c(){t=l("div"),p(t,"class","cell svelte-1agfauy"),p(t,"data-color",n=e[4])},m(e,n){u(e,t,n)},p(e,r){1&r&&n!==(n=e[4])&&p(t,"data-color",n)},d(e){e&&c(t)}}}function D(e){let t,n,r=e[1],o=[];for(let t=0;t<r.length;t+=1)o[t]=B(q(e,r,t));return{c(){t=l("div");for(let e=0;e<o.length;e+=1)o[e].c();n=d(),p(t,"class","row svelte-1agfauy")},m(e,r){u(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);i(t,n)},p(e,s){if(1&s){let i;for(r=e[1],i=0;i<r.length;i+=1){const u=q(e,r,i);o[i]?o[i].p(u,s):(o[i]=B(u),o[i].c(),o[i].m(t,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(e){e&&c(t),a(o,e)}}}function K(t){let n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=D(j(t,r,e));return{c(){n=l("div");for(let e=0;e<o.length;e+=1)o[e].c();p(n,"class","board")},m(e,t){u(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,[t]){if(1&t){let s;for(r=e[0],s=0;s<r.length;s+=1){const i=j(e,r,s);o[s]?o[s].p(i,t):(o[s]=D(i),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},i:e,o:e,d(e){e&&c(n),a(o,e)}}}function W(e,t,n){let{board:r=Array(10).fill(Array(10))}=t;return e.$$set=e=>{"board"in e&&n(0,r=e.board)},[r]}class F extends S{constructor(e){super(),M(this,e,W,K,s,{board:0})}}var H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(e){var t={exports:{}};return e(t,t.exports),t.exports}var z,U=I((function(e,t){var n,r=H&&H.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e){return void 0===e?"<END-OF-FILE>":JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.buildLexer=t.extractByTokenRange=t.extractByPositionRange=t.TokenRangeError=t.TokenError=void 0;var s=function(e){function t(t,n){var r=e.call(this,o(t)+": "+n)||this;return r.pos=t,r.errorMessage=n,r}return r(t,e),t}(Error);t.TokenError=s;var i=function(e){function t(t,n,r){var s=e.call(this,o(t)+" - "+o(n)+": "+r)||this;return s.first=t,s.next=n,s.errorMessage=r,s}return r(t,e),t}(Error);function u(e,t,n){var r=void 0===t?e.length:t.index,o=void 0===n?e.length:n.index;return r>=o?"":e.substring(r,o)}t.TokenRangeError=i,t.extractByPositionRange=u,t.extractByTokenRange=function(e,t,n){return u(e,void 0===t?void 0:t.pos,void 0===n?void 0:n.pos)};var c=function(){function e(e,t,n,r,o,s){this.lexer=e,this.input=t,this.kind=n,this.text=r,this.pos=o,this.keep=s}return Object.defineProperty(e.prototype,"next",{get:function(){return void 0===this.nextToken&&(this.nextToken=this.lexer.parseNextAvailable(this.input,this.pos.index+this.text.length,this.pos.rowEnd,this.pos.columnEnd),void 0===this.nextToken&&(this.nextToken=null)),null===this.nextToken?void 0:this.nextToken},enumerable:!1,configurable:!0}),e}(),a=function(){function e(e){this.rules=e;for(var t=0,n=this.rules;t<n.length;t++){var r=n[t];if("^"!==r[1].source[0])throw new Error('Regular expression patterns for a tokenizer should start with "^": '+r[1].source);if(!r[1].global)throw new Error("Regular expression patterns for a tokenizer should be global: "+r[1].source)}}return e.prototype.parse=function(e){return this.parseNextAvailable(e,0,1,1)},e.prototype.parseNext=function(e,t,n,r){if(t!==e.length){for(var o,i=e.substr(t),u=0,a=this.rules;u<a.length;u++){var l=a[u],f=l[0],d=l[1],p=l[2];if(d.lastIndex=0,d.test(i)){for(var h=i.substr(0,d.lastIndex),g=n,v=r,k=0,x=h;k<x.length;k++){switch(x[k]){case"\r":break;case"\n":g++,v=1;break;default:v++}}var m=new c(this,e,p,h,{index:t,rowBegin:n,columnBegin:r,rowEnd:g,columnEnd:v},f);(void 0===o||o.text.length<m.text.length)&&(o=m)}}if(void 0===o)throw new s({index:t,rowBegin:n,columnBegin:r,rowEnd:n,columnEnd:r},"Unable to tokenize the rest of the input: "+e.substr(t));return o}},e.prototype.parseNextAvailable=function(e,t,n,r){for(var o;;){if(void 0===(o=this.parseNext(e,void 0===o?t:o.pos.index+o.text.length,void 0===o?n:o.pos.rowEnd,void 0===o?r:o.pos.columnEnd)))return;if(o.keep)return o}},e}();t.buildLexer=function(e){return new a(e)}})),V=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.unableToConsumeToken=t.resultOrError=t.betterError=void 0,t.betterError=function(e,t){return void 0===e?t:void 0===t||void 0===e.pos?e:void 0===t.pos||e.pos.index<t.pos.index?t:(e.pos.index,t.pos.index,e)},t.resultOrError=function(e,t,n){return n?{candidates:e,successful:!0,error:t}:{successful:!1,error:t}},t.unableToConsumeToken=function(e){return{kind:"Error",pos:void 0===e?void 0:e.pos,message:"Unable to consume token: "+(void 0===e?"<END-OF-FILE>":e.text)}}})),J=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tok=t.str=t.nil=void 0,t.nil=function(){return{parse:function(e){return{candidates:[{firstToken:e,nextToken:e,result:void 0}],successful:!0,error:void 0}}}},t.str=function(e){return{parse:function(t){return void 0===t||t.text!==e?{successful:!1,error:V.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}},t.tok=function(e){return{parse:function(t){return void 0===t||t.kind!==e?{successful:!1,error:V.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}}})),X=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.seq=void 0,t.seq=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}],o=0,s=e;o<s.length;o++){var i=s[o];if(0===r.length)break;var u=r;r=[];for(var c=0,a=u;c<a.length;c++){var l=a[c],f=i.parse(l.nextToken);if(n=V.betterError(n,f.error),f.successful)for(var d=0,p=f.candidates;d<p.length;d++){var h=p[d];r.push({firstToken:l.firstToken,nextToken:h.nextToken,result:l.result.concat([h.result])})}}}return V.resultOrError(r,n,0!==r.length)}}}})),Z=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.alt=void 0,t.alt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(t){for(var n,r=[],o=!1,s=0,i=e;s<i.length;s++){var u=i[s].parse(t);n=V.betterError(n,u.error),u.successful&&(r=r.concat(u.candidates),o=!0)}return V.resultOrError(r,n,o)}}}})),G=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.opt_sc=t.opt=void 0,t.opt=function(e){return Z.alt(e,J.nil())},t.opt_sc=function(e){return{parse:function(t){var n=e.parse(t);return n.successful?n:{candidates:[{firstToken:t,nextToken:t,result:void 0}],successful:!0,error:n.error}}}}})),Y=I((function(e,t){function n(e,t){return{parse:function(n){var r=e.parse(n);return r.successful?{candidates:r.candidates.map((function(e){return{firstToken:n,nextToken:e.nextToken,result:t(e.result,[n,e.nextToken])}})),successful:!0,error:r.error}:r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.kmid=t.kright=t.kleft=t.apply=void 0,t.apply=n,t.kleft=function(e,t){return n(X.seq(e,t),(function(e){return e[0]}))},t.kright=function(e,t){return n(X.seq(e,t),(function(e){return e[1]}))},t.kmid=function(e,t,r){return n(X.seq(e,t,r),(function(e){return e[1]}))}})),Q=I((function(e,t){function n(e){var t=o(e);return{parse:function(e){var n=t.parse(e);return n.successful?{candidates:n.candidates.reverse(),successful:!0,error:n.error}:n}}}function r(e){return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}];;){var o=r;r=[];for(var s=0,i=o;s<i.length;s++){var u=i[s],c=e.parse(u.nextToken);if(n=V.betterError(n,c.error),c.successful)for(var a=0,l=c.candidates;a<l.length;a++){var f=l[a];f.nextToken!==u.nextToken&&r.push({firstToken:u.firstToken,nextToken:f.nextToken,result:u.result.concat([f.result])})}}if(0===r.length){r=o;break}}return V.resultOrError(r,n,!0)}}}function o(e){return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}],o=0;o<r.length;o++){var s=r[o],i=e.parse(s.nextToken);if(n=V.betterError(n,i.error),i.successful)for(var u=0,c=i.candidates;u<c.length;u++){var a=c[u];a.nextToken!==s.nextToken&&r.push({firstToken:s.firstToken,nextToken:a.nextToken,result:s.result.concat([a.result])})}}return V.resultOrError(r,n,!0)}}}function s(e){return[e[0]].concat(e[1].map((function(e){return e[1]})))}function i(e){return function(t){for(var n=t[0],r=0,o=t[1];r<o.length;r++){var s=o[r];n=e(n,s)}return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.lrec_sc=t.lrec=t.list_sc=t.list=t.repr=t.rep_sc=t.rep=void 0,t.rep=n,t.rep_sc=r,t.repr=o,t.list=function(e,t){return Y.apply(X.seq(e,n(X.seq(t,e))),s)},t.list_sc=function(e,t){return Y.apply(X.seq(e,r(X.seq(t,e))),s)},t.lrec=function(e,t,r){return Y.apply(X.seq(e,n(t)),i(r))},t.lrec_sc=function(e,t,n){return Y.apply(X.seq(e,r(t)),i(n))}})),ee=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.amb=void 0,t.amb=function(e){return{parse:function(t){var n=e.parse(t);if(!n.successful)return n;for(var r=new Map,o=0,s=n.candidates;o<s.length;o++){var i=s[o],u=r.get(i.nextToken);void 0===u?r.set(i.nextToken,[i]):u.push(i)}return{candidates:Array.from(r.values()).map((function(e){return{firstToken:e[0].firstToken,nextToken:e[0].nextToken,result:e.map((function(e){return e.result}))}})),successful:!0,error:n.error}}}}})),te=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.errd=t.err=void 0,t.err=function(e,t){return{parse:function(n){var r=e.parse(n);return r.successful?r:{successful:!1,error:{kind:"Error",pos:r.error.pos,message:t}}}}},t.errd=function(e,t,n){return{parse:function(r){var o=e.parse(r);return o.successful?o:{successful:!0,candidates:[{firstToken:r,nextToken:r,result:n}],error:{kind:"Error",pos:o.error.pos,message:t}}}}}})),ne=I((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.expectSingleResult=t.expectEOF=t.rule=void 0;var n=function(){function e(){}return e.prototype.setPattern=function(e){this.parser=e},e.prototype.parse=function(e){if(void 0===this.parser)throw new Error("Rule has not been initialized. setPattern is required before calling parse.");return this.parser.parse(e)},e}();t.rule=function(){return new n},t.expectEOF=function(e){if(!e.successful)return e;if(0===e.candidates.length)return{successful:!1,error:{kind:"Error",pos:void 0,message:"No result is returned."}};for(var t=[],n=e.error,r=0,o=e.candidates;r<o.length;r++){var s=o[r];void 0===s.nextToken?t.push(s):n=V.betterError(n,{kind:"Error",pos:void 0===s.nextToken?void 0:s.nextToken.pos,message:'The parser cannot reach the end of file, stops at "'+s.nextToken.text+'" at position '+JSON.stringify(s.nextToken.pos)+"."})}return V.resultOrError(t,n,0!==t.length)},t.expectSingleResult=function(e){if(!e.successful)throw new U.TokenError(e.error.pos,e.error.message);if(0===e.candidates.length)throw new U.TokenError(void 0,"No result is returned.");if(1!==e.candidates.length)throw new U.TokenError(void 0,"Multiple results are returned.");return e.candidates[0].result}})),re=I((function(e,t){var n=H&&H.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=H&&H.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(U,t),r(V,t),r(J,t),r(X,t),r(Z,t),r(G,t),r(Q,t),r(Y,t),r(ee,t),r(te,t),r(ne,t)}));function oe(e=!1){return re.buildLexer([[e,/^\s+/g,z.WS],[!0,/^#[^\n]*/g,z.Comment],[!0,/^(if|each|from|to|end)/g,z.KW],[!0,/^\d+/g,z.Number],[!0,/^=/g,z.Assign],[!0,/^[*/%]/g,z.Op1],[!0,/^[-+]/g,z.Op2],[!0,/^,/g,z.Comma],[!0,/^:/g,z.Col],[!0,/^\(/g,z.LP],[!0,/^\)/g,z.RP],[!0,/^[a-z_]+/g,z.Name]])}!function(e){e[e.KW=0]="KW",e[e.Comment=1]="Comment",e[e.Number=2]="Number",e[e.Op1=3]="Op1",e[e.Op2=4]="Op2",e[e.Assign=5]="Assign",e[e.Comma=6]="Comma",e[e.Col=7]="Col",e[e.LP=8]="LP",e[e.RP=9]="RP",e[e.WS=10]="WS",e[e.Name=11]="Name"}(z||(z={}));const se=oe(),ie={"-":(e,t)=>e-t,"+":(e,t)=>e+t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t};function ue(e,t={vars:{},funcs:{}}){function n(e,t){return{eval:()=>ie[t[0].text](e.eval(),t[1].eval())}}const r=re.rule(),o=re.rule(),s=re.rule(),i=re.rule(),u=re.rule(),c=re.rule(),a=re.rule(),l=re.rule(),f=re.rule(),d=re.rule(),p=re.rule();return r.setPattern(re.alt(re.apply(re.seq(re.tok(z.LP),re.tok(z.RP)),(()=>[])),re.kmid(re.tok(z.LP),re.lrec_sc(re.apply(i,(e=>[e])),re.seq(re.tok(z.Comma),i),(function(e,t){return e.push(t[1]),e})),re.tok(z.RP)))),o.setPattern(re.alt(re.apply(re.tok(z.Name),(function(e){const n=e.text;return n in t.vars||(t.vars[n]=0),{eval:()=>t.vars[n]}})),re.apply(re.tok(z.Number),(function(e){return{eval:()=>function(e){return+e.text}(e)}})),re.kmid(re.tok(z.LP),i,re.tok(z.RP)))),s.setPattern(re.lrec_sc(o,re.seq(re.tok(z.Op1),o),n)),i.setPattern(re.alt(re.lrec_sc(s,re.seq(re.tok(z.Op2),s),n),u)),u.setPattern(re.apply(re.seq(re.tok(z.Name),r),(function(e){const[n,r]=e;return n.text in t.funcs||(t.funcs[n.text]=(...e)=>0),{eval:()=>{const e=r.map((e=>e.eval()));return t.funcs[n.text](...e)}}}))),a.setPattern(re.apply(re.seq(re.str("each"),re.tok(z.Name),re.str("from"),i,re.str("to"),i,re.tok(z.Col),p,re.str("end")),(function(e){const[n,r,o,s,i,u,c,a,l]=e;return{eval:()=>{for(let e=s.eval();e<=u.eval();e++)t.vars[r.text]=e,a.forEach((e=>e.eval()));return 0}}}))),l.setPattern(re.apply(re.seq(re.str("if"),i,re.tok(z.Col),p,re.str("end")),(function(e){const[t,n,r,o,s]=e;return{eval:()=>{const e=n.eval();return e&&o.forEach((e=>e.eval())),e}}}))),c.setPattern(re.apply(re.seq(re.tok(z.Name),re.tok(z.Assign),i),(function(e){const[n,r,o]=e;return{eval:()=>t.vars[n.text]=o.eval()}}))),f.setPattern(re.apply(re.tok(z.Comment),(()=>({eval:()=>0})))),d.setPattern(re.alt(c,u,a,l,f)),p.setPattern(re.rep_sc(d)),re.expectSingleResult(re.expectEOF(p.parse(se.parse(e))))}function ce(e,t,n){const r=e.slice();return r[1]=t[n],r}function ae(t){let n,r,o,s,a=t[1]+"";return{c(){n=l("div"),r=f(a),o=d(),p(n,"data-color",s=t[1]),p(n,"class","svelte-1ufx59h")},m(e,t){u(e,n,t),i(n,r),i(n,o)},p:e,d(e){e&&c(n)}}}function le(e){let t,n,r,o,s,f,h,g;s=new F({props:{board:e[0]}});let v=[...Array(16).keys()],k=[];for(let t=0;t<v.length;t+=1)k[t]=ae(ce(e,v,t));return{c(){var e;t=l("main"),n=l("div"),r=l("div"),o=d(),(e=s.$$.fragment)&&e.c(),f=d(),h=l("div");for(let e=0;e<k.length;e+=1)k[e].c();p(r,"id","editor"),p(r,"class","svelte-1ufx59h"),p(n,"class","edit svelte-1ufx59h"),p(h,"class","colors svelte-1ufx59h"),p(t,"class","svelte-1ufx59h")},m(e,c){u(e,t,c),i(t,n),i(n,r),i(n,o),$(s,n,null),i(t,f),i(t,h);for(let e=0;e<k.length;e+=1)k[e].m(h,null);g=!0},p(e,[t]){const n={};if(1&t&&(n.board=e[0]),s.$set(n),0&t){let n;for(v=[...Array(16).keys()],n=0;n<v.length;n+=1){const r=ce(e,v,n);k[n]?k[n].p(r,t):(k[n]=ae(r),k[n].c(),k[n].m(h,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=v.length}},i(e){g||(P(s.$$.fragment,e),g=!0)},o(e){!function(e,t,n,r){if(e&&e.o){if(N.has(e))return;N.add(e),(void 0).c.push((()=>{N.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}(s.$$.fragment,e),g=!1},d(e){e&&c(t),C(s),a(k,e)}}}function fe(e,t,n){const r=Array.from(Array(16),(()=>new Array(16)));return addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("editor"),t=oe(!0);function o(e){return console.log("Sleep",e),new Promise((t=>setTimeout(t,e)))}function s(e,t,o){return console.log(e,t,o),n(0,r[e][t]=o,r),0}function i(e,t){if(t===z.WS)return document.createTextNode(e);{const n=document.createElement("t");return n.innerText=e,n.setAttribute("kind",t.toString()),n}}const u=R(e,(e=>{const n=e.textContent,r=document.createElement("div");let o=t.parse(n);for(console.log(o);o;)r.appendChild(i(o.text,o.kind)),o=o.next;console.log(r),e.innerHTML=r.innerHTML}),{tab:"  ",indentOn:/.*:$/});function c(e){console.log("executing",e),r.forEach((e=>e.fill(0)));ue(e,{vars:{},funcs:{sleep:o,color:s}}).forEach((e=>e.eval()))}u.onUpdate(c);const a="each row from 0 to 15:\n  each col from 0 to 15:\n    c = (row + col) % 2\n    color(row, col, c)\n  end\nend";u.updateCode(a),c(a)})),[r]}return new class extends S{constructor(e){super(),M(this,e,fe,le,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
