var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function l(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function d(){return f(" ")}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}let h;function g(e){h=e}const v=[],k=[],m=[],x=[],y=Promise.resolve();let b=!1;function T(e){m.push(e)}const E=new Set;let _=0;function O(){const e=h;do{for(;_<v.length;){const e=v[_];_++,g(e),w(e.$$)}for(g(null),v.length=0,_=0;k.length;)k.pop()();for(let e=0;e<m.length;e+=1){const t=m[e];E.has(t)||(E.add(t),t())}m.length=0}while(v.length);for(;x.length;)x.pop()();b=!1,E.clear(),g(e)}function w(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const $=new Set;function N(e,t){e&&e.i&&($.delete(e),e.i(t))}function P(e,n,s,i){const{fragment:u,on_mount:c,on_destroy:l,after_update:a}=e.$$;u&&u.m(n,s),i||T((()=>{const n=c.map(t).filter(o);l?l.push(...n):r(n),e.$$.on_mount=[]})),a.forEach(T)}function C(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function A(e,t){-1===e.$$.dirty[0]&&(v.push(e),b||(b=!0,y.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(t,o,s,i,u,l,a,f=[-1]){const d=h;g(t);const p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};a&&a(p.root);let v=!1;if(p.ctx=s?s(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&u(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),v&&A(t,e)),n})):[],p.update(),v=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&N(t.$$.fragment),P(t,o.target,o.anchor,o.customElement),O()}g(d)}class R{$destroy(){C(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const L=window;function j(e,t,n={}){const r=Object.assign({tab:"\t",indentOn:/{$/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:L},n),o=r.window,s=o.document;let i,u,c=[],l=[],a=-1,f=!1;e.setAttribute("contenteditable","plaintext-only"),e.setAttribute("spellcheck",r.spellcheck?"true":"false"),e.style.outline="none",e.style.overflowWrap="break-word",e.style.overflowY="auto",e.style.whiteSpace="pre-wrap";let d=!1;t(e),"plaintext-only"!==e.contentEditable&&(d=!0),d&&e.setAttribute("contenteditable","true");const p=P((()=>{const n=m();t(e,n),x(n)}),30);let h=!1;const g=e=>!w(e)&&!$(e)&&"Meta"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&!e.key.startsWith("Arrow"),v=P((e=>{g(e)&&(E(),h=!1)}),300),k=(t,n)=>{c.push([t,n]),e.addEventListener(t,n)};function m(){const t=R(),n={start:0,end:0,dir:void 0};let{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:u}=t;if(!r||!i)throw"error1";if(r.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");r.insertBefore(e,r.childNodes[o]),r=e,o=0}if(i.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");i.insertBefore(e,i.childNodes[u]),i=e,u=0}return _(e,(e=>{if(e===r&&e===i)return n.start+=o,n.end+=u,n.dir=o<=u?"->":"<-","stop";if(e===r){if(n.start+=o,n.dir)return"stop";n.dir="->"}else if(e===i){if(n.end+=u,n.dir)return"stop";n.dir="<-"}e.nodeType===Node.TEXT_NODE&&("->"!=n.dir&&(n.start+=e.nodeValue.length),"<-"!=n.dir&&(n.end+=e.nodeValue.length))})),e.normalize(),n}function x(t){const n=R();let r,o,s=0,i=0;if(t.dir||(t.dir="->"),t.start<0&&(t.start=0),t.end<0&&(t.end=0),"<-"==t.dir){const{start:e,end:n}=t;t.start=n,t.end=e}let u=0;_(e,(e=>{if(e.nodeType!==Node.TEXT_NODE)return;const n=(e.nodeValue||"").length;if(u+n>t.start&&(r||(r=e,s=t.start-u),u+n>t.end))return o=e,i=t.end-u,"stop";u+=n})),r||(r=e,s=e.childNodes.length),o||(o=e,i=e.childNodes.length),"<-"==t.dir&&([r,s,o,i]=[o,i,r,s]),n.setBaseAndExtent(r,s,o,i)}function y(){const t=R().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function b(){const t=R().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function T(e){if(d&&"Enter"===e.key)if(M(e),e.stopPropagation(),""==b()){N("\n ");const e=m();e.start=--e.end,x(e)}else N("\n")}function E(){if(!f)return;const t=e.innerHTML,n=m(),r=l[a];if(r&&r.html===t&&r.pos.start===n.start&&r.pos.end===n.end)return;a++,l[a]={html:t,pos:n},l.splice(a+1);a>300&&(a=300,l.splice(0,1))}function _(e,t){const n=[];e.firstChild&&n.push(e.firstChild);let r=n.pop();for(;r&&"stop"!==t(r);)r.nextSibling&&n.push(r.nextSibling),r.firstChild&&n.push(r.firstChild),r=n.pop()}function O(e){return e.metaKey||e.ctrlKey}function w(e){return O(e)&&!e.shiftKey&&"KeyZ"===e.code}function $(e){return O(e)&&e.shiftKey&&"KeyZ"===e.code}function N(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),s.execCommand("insertHTML",!1,e)}function P(e,t){let n=0;return(...r)=>{clearTimeout(n),n=o.setTimeout((()=>e(...r)),t)}}function C(e){let t=e.length-1;for(;t>=0&&"\n"!==e[t];)t--;t++;let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n)||"",t,n]}function A(){return e.textContent||""}function M(e){e.preventDefault()}function R(){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.getSelection():o.getSelection()}return k("keydown",(t=>{t.defaultPrevented||(u=A(),r.preserveIdent?function(e){if("Enter"===e.key){const t=y(),n=b();let[o]=C(t),s=o;if(r.indentOn.test(t)&&(s+=r.tab),s.length>0?(M(e),e.stopPropagation(),N("\n"+s)):T(e),s!==o&&"}"===n[0]){const e=m();N("\n"+o),x(e)}}}(t):T(t),r.catchTab&&function(e){if("Tab"===e.key)if(M(e),e.shiftKey){const e=y();let[t,n]=C(e);if(t.length>0){const e=m(),o=Math.min(r.tab.length,t.length);x({start:n,end:n+o}),s.execCommand("delete"),e.start-=o,e.end-=o,x(e)}}else N(r.tab)}(t),r.addClosing&&function(e){const t="([{'\"",n=")]}'\"",r=b(),o=y(),s="\\"===o.substr(o.length-1),i=r.substr(0,1);if(n.includes(e.key)&&!s&&i===e.key){const t=m();M(e),t.start=++t.end,x(t)}else if(t.includes(e.key)&&!s&&("\"'".includes(e.key)||[""," ","\n"].includes(i))){M(e);const r=m(),o=r.start==r.end?"":R().toString();N(e.key+o+n[t.indexOf(e.key)]),r.start++,r.end++,x(r)}}(t),r.history&&(!function(t){if(w(t)){M(t),a--;const n=l[a];n&&(e.innerHTML=n.html,x(n.pos)),a<0&&(a=0)}if($(t)){M(t),a++;const n=l[a];n&&(e.innerHTML=n.html,x(n.pos)),a>=l.length&&a--}}(t),g(t)&&!h&&(E(),h=!0)),d&&x(m()))})),k("keyup",(e=>{e.defaultPrevented||e.isComposing||(u!==A()&&p(),v(e),i&&i(A()))})),k("focus",(e=>{f=!0})),k("blur",(e=>{f=!1})),k("paste",(n=>{E(),function(n){M(n);const r=(n.originalEvent||n).clipboardData.getData("text/plain").replace(/\r/g,""),o=m();N(r),t(e),x({start:o.start+r.length,end:o.start+r.length})}(n),E(),i&&i(A())})),{updateOptions(e){Object.assign(r,e)},updateCode(n){e.textContent=n,t(e)},onUpdate(e){i=e},toString:A,save:m,restore:x,recordHistory:E,destroy(){for(let[t,n]of c)e.removeEventListener(t,n)}}}function q(e,t,n){const r=e.slice();return r[1]=t[n],r[3]=n,r}function S(e,t,n){const r=e.slice();return r[4]=t[n],r[3]=n,r}function F(e,t,n){const r=e.slice();return r[6]=t[n],r}function I(e){let t,n;return{c(){t=a("div"),p(t,"class","cell svelte-1lmg422"),p(t,"data-color",n=e[6])},m(e,n){u(e,t,n)},p(e,r){1&r&&n!==(n=e[6])&&p(t,"data-color",n)},d(e){e&&c(t)}}}function B(e){let t,n,r,o,s=e[4],h=[];for(let t=0;t<s.length;t+=1)h[t]=I(F(e,s,t));return{c(){t=a("div");for(let e=0;e<h.length;e+=1)h[e].c();n=d(),r=a("div"),o=f(e[3]),p(r,"class","num svelte-1lmg422"),p(t,"class","row svelte-1lmg422")},m(e,s){u(e,t,s);for(let e=0;e<h.length;e+=1)h[e].m(t,null);i(t,n),i(t,r),i(r,o)},p(e,r){if(1&r){let o;for(s=e[4],o=0;o<s.length;o+=1){const i=F(e,s,o);h[o]?h[o].p(i,r):(h[o]=I(i),h[o].c(),h[o].m(t,n))}for(;o<h.length;o+=1)h[o].d(1);h.length=s.length}},d(e){e&&c(t),l(h,e)}}}function D(t){let n,r;return{c(){n=a("div"),r=f(t[3]),p(n,"class","num svelte-1lmg422")},m(e,t){u(e,n,t),i(n,r)},p:e,d(e){e&&c(n)}}}function z(t){let n,r,o,s=t[0],f=[];for(let e=0;e<s.length;e+=1)f[e]=B(S(t,s,e));let h=t[0][0],g=[];for(let e=0;e<h.length;e+=1)g[e]=D(q(t,h,e));return{c(){n=a("div");for(let e=0;e<f.length;e+=1)f[e].c();r=d(),o=a("div");for(let e=0;e<g.length;e+=1)g[e].c();p(o,"class","row svelte-1lmg422"),p(n,"class","board")},m(e,t){u(e,n,t);for(let e=0;e<f.length;e+=1)f[e].m(n,null);i(n,r),i(n,o);for(let e=0;e<g.length;e+=1)g[e].m(o,null)},p(e,[t]){if(1&t){let o;for(s=e[0],o=0;o<s.length;o+=1){const i=S(e,s,o);f[o]?f[o].p(i,t):(f[o]=B(i),f[o].c(),f[o].m(n,r))}for(;o<f.length;o+=1)f[o].d(1);f.length=s.length}if(1&t){let n;for(h=e[0][0],n=0;n<h.length;n+=1){const r=q(e,h,n);g[n]?g[n].p(r,t):(g[n]=D(r),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=h.length}},i:e,o:e,d(e){e&&c(n),l(f,e),l(g,e)}}}function H(e,t,n){let{board:r=Array(10).fill(Array(10))}=t;return e.$$set=e=>{"board"in e&&n(0,r=e.board)},[r]}class K extends R{constructor(e){super(),M(this,e,H,z,s,{board:0})}}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function U(e){var t={exports:{}};return e(t,t.exports),t.exports}var V,J=U((function(e,t){var n,r=W&&W.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e){return void 0===e?"<END-OF-FILE>":JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.buildLexer=t.extractByTokenRange=t.extractByPositionRange=t.TokenRangeError=t.TokenError=void 0;var s=function(e){function t(t,n){var r=e.call(this,o(t)+": "+n)||this;return r.pos=t,r.errorMessage=n,r}return r(t,e),t}(Error);t.TokenError=s;var i=function(e){function t(t,n,r){var s=e.call(this,o(t)+" - "+o(n)+": "+r)||this;return s.first=t,s.next=n,s.errorMessage=r,s}return r(t,e),t}(Error);function u(e,t,n){var r=void 0===t?e.length:t.index,o=void 0===n?e.length:n.index;return r>=o?"":e.substring(r,o)}t.TokenRangeError=i,t.extractByPositionRange=u,t.extractByTokenRange=function(e,t,n){return u(e,void 0===t?void 0:t.pos,void 0===n?void 0:n.pos)};var c=function(){function e(e,t,n,r,o,s){this.lexer=e,this.input=t,this.kind=n,this.text=r,this.pos=o,this.keep=s}return Object.defineProperty(e.prototype,"next",{get:function(){return void 0===this.nextToken&&(this.nextToken=this.lexer.parseNextAvailable(this.input,this.pos.index+this.text.length,this.pos.rowEnd,this.pos.columnEnd),void 0===this.nextToken&&(this.nextToken=null)),null===this.nextToken?void 0:this.nextToken},enumerable:!1,configurable:!0}),e}(),l=function(){function e(e){this.rules=e;for(var t=0,n=this.rules;t<n.length;t++){var r=n[t];if("^"!==r[1].source[0])throw new Error('Regular expression patterns for a tokenizer should start with "^": '+r[1].source);if(!r[1].global)throw new Error("Regular expression patterns for a tokenizer should be global: "+r[1].source)}}return e.prototype.parse=function(e){return this.parseNextAvailable(e,0,1,1)},e.prototype.parseNext=function(e,t,n,r){if(t!==e.length){for(var o,i=e.substr(t),u=0,l=this.rules;u<l.length;u++){var a=l[u],f=a[0],d=a[1],p=a[2];if(d.lastIndex=0,d.test(i)){for(var h=i.substr(0,d.lastIndex),g=n,v=r,k=0,m=h;k<m.length;k++){switch(m[k]){case"\r":break;case"\n":g++,v=1;break;default:v++}}var x=new c(this,e,p,h,{index:t,rowBegin:n,columnBegin:r,rowEnd:g,columnEnd:v},f);(void 0===o||o.text.length<x.text.length)&&(o=x)}}if(void 0===o)throw new s({index:t,rowBegin:n,columnBegin:r,rowEnd:n,columnEnd:r},"Unable to tokenize the rest of the input: "+e.substr(t));return o}},e.prototype.parseNextAvailable=function(e,t,n,r){for(var o;;){if(void 0===(o=this.parseNext(e,void 0===o?t:o.pos.index+o.text.length,void 0===o?n:o.pos.rowEnd,void 0===o?r:o.pos.columnEnd)))return;if(o.keep)return o}},e}();t.buildLexer=function(e){return new l(e)}})),X=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.unableToConsumeToken=t.resultOrError=t.betterError=void 0,t.betterError=function(e,t){return void 0===e?t:void 0===t||void 0===e.pos?e:void 0===t.pos||e.pos.index<t.pos.index?t:(e.pos.index,t.pos.index,e)},t.resultOrError=function(e,t,n){return n?{candidates:e,successful:!0,error:t}:{successful:!1,error:t}},t.unableToConsumeToken=function(e){return{kind:"Error",pos:void 0===e?void 0:e.pos,message:"Unable to consume token: "+(void 0===e?"<END-OF-FILE>":e.text)}}})),Z=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tok=t.str=t.nil=void 0,t.nil=function(){return{parse:function(e){return{candidates:[{firstToken:e,nextToken:e,result:void 0}],successful:!0,error:void 0}}}},t.str=function(e){return{parse:function(t){return void 0===t||t.text!==e?{successful:!1,error:X.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}},t.tok=function(e){return{parse:function(t){return void 0===t||t.kind!==e?{successful:!1,error:X.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}}})),G=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.seq=void 0,t.seq=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}],o=0,s=e;o<s.length;o++){var i=s[o];if(0===r.length)break;var u=r;r=[];for(var c=0,l=u;c<l.length;c++){var a=l[c],f=i.parse(a.nextToken);if(n=X.betterError(n,f.error),f.successful)for(var d=0,p=f.candidates;d<p.length;d++){var h=p[d];r.push({firstToken:a.firstToken,nextToken:h.nextToken,result:a.result.concat([h.result])})}}}return X.resultOrError(r,n,0!==r.length)}}}})),Y=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.alt=void 0,t.alt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(t){for(var n,r=[],o=!1,s=0,i=e;s<i.length;s++){var u=i[s].parse(t);n=X.betterError(n,u.error),u.successful&&(r=r.concat(u.candidates),o=!0)}return X.resultOrError(r,n,o)}}}})),Q=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.opt_sc=t.opt=void 0,t.opt=function(e){return Y.alt(e,Z.nil())},t.opt_sc=function(e){return{parse:function(t){var n=e.parse(t);return n.successful?n:{candidates:[{firstToken:t,nextToken:t,result:void 0}],successful:!0,error:n.error}}}}})),ee=U((function(e,t){function n(e,t){return{parse:function(n){var r=e.parse(n);return r.successful?{candidates:r.candidates.map((function(e){return{firstToken:n,nextToken:e.nextToken,result:t(e.result,[n,e.nextToken])}})),successful:!0,error:r.error}:r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.kmid=t.kright=t.kleft=t.apply=void 0,t.apply=n,t.kleft=function(e,t){return n(G.seq(e,t),(function(e){return e[0]}))},t.kright=function(e,t){return n(G.seq(e,t),(function(e){return e[1]}))},t.kmid=function(e,t,r){return n(G.seq(e,t,r),(function(e){return e[1]}))}})),te=U((function(e,t){function n(e){var t=o(e);return{parse:function(e){var n=t.parse(e);return n.successful?{candidates:n.candidates.reverse(),successful:!0,error:n.error}:n}}}function r(e){return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}];;){var o=r;r=[];for(var s=0,i=o;s<i.length;s++){var u=i[s],c=e.parse(u.nextToken);if(n=X.betterError(n,c.error),c.successful)for(var l=0,a=c.candidates;l<a.length;l++){var f=a[l];f.nextToken!==u.nextToken&&r.push({firstToken:u.firstToken,nextToken:f.nextToken,result:u.result.concat([f.result])})}}if(0===r.length){r=o;break}}return X.resultOrError(r,n,!0)}}}function o(e){return{parse:function(t){for(var n,r=[{firstToken:t,nextToken:t,result:[]}],o=0;o<r.length;o++){var s=r[o],i=e.parse(s.nextToken);if(n=X.betterError(n,i.error),i.successful)for(var u=0,c=i.candidates;u<c.length;u++){var l=c[u];l.nextToken!==s.nextToken&&r.push({firstToken:s.firstToken,nextToken:l.nextToken,result:s.result.concat([l.result])})}}return X.resultOrError(r,n,!0)}}}function s(e){return[e[0]].concat(e[1].map((function(e){return e[1]})))}function i(e){return function(t){for(var n=t[0],r=0,o=t[1];r<o.length;r++){var s=o[r];n=e(n,s)}return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.lrec_sc=t.lrec=t.list_sc=t.list=t.repr=t.rep_sc=t.rep=void 0,t.rep=n,t.rep_sc=r,t.repr=o,t.list=function(e,t){return ee.apply(G.seq(e,n(G.seq(t,e))),s)},t.list_sc=function(e,t){return ee.apply(G.seq(e,r(G.seq(t,e))),s)},t.lrec=function(e,t,r){return ee.apply(G.seq(e,n(t)),i(r))},t.lrec_sc=function(e,t,n){return ee.apply(G.seq(e,r(t)),i(n))}})),ne=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.amb=void 0,t.amb=function(e){return{parse:function(t){var n=e.parse(t);if(!n.successful)return n;for(var r=new Map,o=0,s=n.candidates;o<s.length;o++){var i=s[o],u=r.get(i.nextToken);void 0===u?r.set(i.nextToken,[i]):u.push(i)}return{candidates:Array.from(r.values()).map((function(e){return{firstToken:e[0].firstToken,nextToken:e[0].nextToken,result:e.map((function(e){return e.result}))}})),successful:!0,error:n.error}}}}})),re=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.errd=t.err=void 0,t.err=function(e,t){return{parse:function(n){var r=e.parse(n);return r.successful?r:{successful:!1,error:{kind:"Error",pos:r.error.pos,message:t}}}}},t.errd=function(e,t,n){return{parse:function(r){var o=e.parse(r);return o.successful?o:{successful:!0,candidates:[{firstToken:r,nextToken:r,result:n}],error:{kind:"Error",pos:o.error.pos,message:t}}}}}})),oe=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.expectSingleResult=t.expectEOF=t.rule=void 0;var n=function(){function e(){}return e.prototype.setPattern=function(e){this.parser=e},e.prototype.parse=function(e){if(void 0===this.parser)throw new Error("Rule has not been initialized. setPattern is required before calling parse.");return this.parser.parse(e)},e}();t.rule=function(){return new n},t.expectEOF=function(e){if(!e.successful)return e;if(0===e.candidates.length)return{successful:!1,error:{kind:"Error",pos:void 0,message:"No result is returned."}};for(var t=[],n=e.error,r=0,o=e.candidates;r<o.length;r++){var s=o[r];void 0===s.nextToken?t.push(s):n=X.betterError(n,{kind:"Error",pos:void 0===s.nextToken?void 0:s.nextToken.pos,message:'The parser cannot reach the end of file, stops at "'+s.nextToken.text+'" at position '+JSON.stringify(s.nextToken.pos)+"."})}return X.resultOrError(t,n,0!==t.length)},t.expectSingleResult=function(e){if(!e.successful)throw new J.TokenError(e.error.pos,e.error.message);if(0===e.candidates.length)throw new J.TokenError(void 0,"No result is returned.");if(1!==e.candidates.length)throw new J.TokenError(void 0,"Multiple results are returned.");return e.candidates[0].result}})),se=U((function(e,t){var n=W&&W.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=W&&W.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(J,t),r(X,t),r(Z,t),r(G,t),r(Y,t),r(Q,t),r(te,t),r(ee,t),r(ne,t),r(re,t),r(oe,t)}));!function(e){e[e.If=0]="If",e[e.Each=1]="Each",e[e.From=2]="From",e[e.To=3]="To",e[e.End=4]="End",e[e.Comment=5]="Comment",e[e.Number=6]="Number",e[e.Op1=7]="Op1",e[e.Op2=8]="Op2",e[e.Assign=9]="Assign",e[e.Comma=10]="Comma",e[e.Col=11]="Col",e[e.LP=12]="LP",e[e.RP=13]="RP",e[e.WS=14]="WS",e[e.Name=15]="Name"}(V||(V={}));const ie={If:"if",Each:"each",From:"from",To:"to",End:"end"},ue={If:"אם",Each:"לכל",From:"מ",To:"עד",End:"סוף"};function ce(e=!1,t=ie){return se.buildLexer([[e,/^\s+/g,V.WS],[!0,/^#[^\n]*/g,V.Comment],[!0,new RegExp(`^${t.If}`,"g"),V.If],[!0,new RegExp(`^${t.Each}`,"g"),V.Each],[!0,new RegExp(`^${t.From}`,"g"),V.From],[!0,new RegExp(`^${t.To}`,"g"),V.To],[!0,new RegExp(`^${t.End}`,"g"),V.End],[!0,/^\d+/g,V.Number],[!0,/^=/g,V.Assign],[!0,/^[*/%]/g,V.Op1],[!0,/^[-+]/g,V.Op2],[!0,/^,/g,V.Comma],[!0,/^:/g,V.Col],[!0,/^\(/g,V.LP],[!0,/^\)/g,V.RP],[!0,/^[a-z_א-ת]+/g,V.Name]])}const le={"-":(e,t)=>e-t,"+":(e,t)=>e+t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t};function ae(e,t,n){const r=e.slice();return r[1]=t[n],r}function fe(t){let n,r,o,s,l=t[1]+"";return{c(){n=a("div"),r=f(l),o=d(),p(n,"data-color",s=t[1]),p(n,"class","svelte-oz9st5")},m(e,t){u(e,n,t),i(n,r),i(n,o)},p:e,d(e){e&&c(n)}}}function de(e){let t,n,r,o,s,f,h,g;s=new K({props:{board:e[0]}});let v=[...Array(16).keys()],k=[];for(let t=0;t<v.length;t+=1)k[t]=fe(ae(e,v,t));return{c(){var e;t=a("main"),n=a("div"),r=a("div"),o=d(),(e=s.$$.fragment)&&e.c(),f=d(),h=a("div");for(let e=0;e<k.length;e+=1)k[e].c();p(r,"id","editor"),p(r,"class","svelte-oz9st5"),p(n,"class","edit svelte-oz9st5"),p(h,"class","colors svelte-oz9st5"),p(t,"dir","rtl"),p(t,"class","svelte-oz9st5")},m(e,c){u(e,t,c),i(t,n),i(n,r),i(n,o),P(s,n,null),i(t,f),i(t,h);for(let e=0;e<k.length;e+=1)k[e].m(h,null);g=!0},p(e,[t]){const n={};if(1&t&&(n.board=e[0]),s.$set(n),0&t){let n;for(v=[...Array(16).keys()],n=0;n<v.length;n+=1){const r=ae(e,v,n);k[n]?k[n].p(r,t):(k[n]=fe(r),k[n].c(),k[n].m(h,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=v.length}},i(e){g||(N(s.$$.fragment,e),g=!0)},o(e){!function(e,t,n,r){if(e&&e.o){if($.has(e))return;$.add(e),(void 0).c.push((()=>{$.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}(s.$$.fragment,e),g=!1},d(e){e&&c(t),C(s),l(k,e)}}}function pe(e,t,n){const r=Array.from(Array(16),(()=>new Array(16)));return addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("editor"),t=ce(!0,ue);function o(e){}function s(e,t,o){return console.log(e,t,o),0<=e&&e<16&&0<=t&&t<16&&n(0,r[e][t]=o,r),0}function i(e,t){if(t===V.WS)return document.createTextNode(e);{const n=document.createElement("t");n.innerText=e;const r=t in[V.If,V.Each,V.From,V.To,V.End];return n.setAttribute("kw",r?"true":"false"),n.setAttribute("comment",t===V.Comment?"true":"false"),n}}const u=j(e,(e=>{const n=e.textContent,r=document.createElement("div");let o=t.parse(n);for(console.log(o);o;)r.appendChild(i(o.text,o.kind)),o=o.next;console.log(r),e.innerHTML=r.innerHTML}),{tab:"  ",indentOn:/.*:$/});function c(e){console.log("executing",e),r.forEach((e=>e.fill(0)));const t=function(e,{lexer:t=ce(),host:n={vars:{},funcs:{}}}={}){function r(e,t){return{eval:()=>le[t[0].text](e.eval(),t[1].eval())}}const o=se.rule(),s=se.rule(),i=se.rule(),u=se.rule(),c=se.rule(),l=se.rule(),a=se.rule(),f=se.rule(),d=se.rule(),p=se.rule(),h=se.rule();return o.setPattern(se.alt(se.apply(se.seq(se.tok(V.LP),se.tok(V.RP)),(()=>[])),se.kmid(se.tok(V.LP),se.lrec_sc(se.apply(u,(e=>[e])),se.seq(se.tok(V.Comma),u),(function(e,t){return e.push(t[1]),e})),se.tok(V.RP)))),s.setPattern(se.alt(se.apply(se.tok(V.Name),(function(e){const t=e.text;return t in n.vars||(n.vars[t]=0),{eval:()=>n.vars[t]}})),se.apply(se.tok(V.Number),(function(e){return{eval:()=>function(e){return+e.text}(e)}})),se.kmid(se.tok(V.LP),u,se.tok(V.RP)))),i.setPattern(se.lrec_sc(s,se.seq(se.tok(V.Op1),s),r)),u.setPattern(se.alt(se.lrec_sc(i,se.seq(se.tok(V.Op2),i),r),c)),c.setPattern(se.apply(se.seq(se.tok(V.Name),o),(function(e){const[t,r]=e;return t.text in n.funcs||(n.funcs[t.text]=(...e)=>0),{eval:()=>{const e=r.map((e=>e.eval()));return n.funcs[t.text](...e)}}}))),a.setPattern(se.apply(se.seq(se.tok(V.Each),se.tok(V.Name),se.tok(V.From),u,se.tok(V.To),u,se.tok(V.Col),h,se.tok(V.End)),(function(e){const[t,r,o,s,i,u,c,l,a]=e;return{eval:()=>{for(let e=s.eval();e<=u.eval();e++)n.vars[r.text]=e,l.forEach((e=>e.eval()));return 0}}}))),f.setPattern(se.apply(se.seq(se.tok(V.If),u,se.tok(V.Col),h,se.tok(V.End)),(function(e){const[t,n,r,o,s]=e;return{eval:()=>{const e=n.eval();return e&&o.forEach((e=>e.eval())),e}}}))),l.setPattern(se.apply(se.seq(se.tok(V.Name),se.tok(V.Assign),u),(function(e){const[t,r,o]=e;return{eval:()=>n.vars[t.text]=o.eval()}}))),d.setPattern(se.apply(se.tok(V.Comment),(()=>({eval:()=>0})))),p.setPattern(se.alt(l,c,a,f,d)),h.setPattern(se.rep_sc(p)),se.expectSingleResult(se.expectEOF(h.parse(t.parse(e))))}(e,{host:{vars:{},funcs:{sleep:o,color:s,"צבע":s,"נמנם":o}},lexer:ce(!1,ue)});t.forEach((e=>e.eval()))}u.onUpdate(c);const l="# דוגמה לשימוש בפונקציה צבע\n\t\t\nלכל שורה מ 0 עד 15:\n  לכל עמודה מ 0 עד 15:\n    צבע(שורה, עמודה, (שורה + עמודה) % 2)\n  סוף\nסוף";u.updateCode(l),c(l)})),[r]}return new class extends R{constructor(e){super(),M(this,e,pe,de,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
